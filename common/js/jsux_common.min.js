/*! Copyright (C) StreamUX <http://www.streamux.com> */
/**!
 * @concat js in common 
 * project sux
 * date 06-01-2019
 * @brief jsux Common Javascript
 **/
function setCookie(a,b,c){var d=new Date;d.setDate(d.getDate()+c),document.cookie=escape(a)+"="+escape(b)+"; path=/; expires="+d.toGMTString()+";"}function getCookie(a){for(var b=escape(a)+"=",c=0;c<=document.cookie.length;){var d=c+b.length;if(document.cookie.substring(c,d)==b)return(popendCookie=document.cookie.indexOf(";",d))==-1&&(popendCookie=document.cookie.length),unescape(document.cookie.substring(d,popendCookie));if(c=document.cookie.indexOf(" ",c)+1,0===c)break}return""}function closePopup(a){document.forms[0].suxpop.checked&&setCookie(a,"__sux_nopopup",1),self.close()}function openPopup(a,b,c,d,e,f){"__sux_nopopup"!=getCookie(b)&&(suxpopWindow=window.open(a,b,"'toolbar=no,location=no,status=no,menubar=no,scrollbars=auto,left="+c+"px,top="+d+"px,width="+e+"px,height="+f+"px'"),suxpopWindow.opener=self)}var popupManager=popupManager||{};!function(a){var b=function(){var a=this,b=[],c=300,d=null,e=0,f=0;this.init=function(a){e=0,d=a,f=a.length},this.open=function(){var b="",c=d[e].id,g=d[e].popup_name,h=(d[e].skin,d[e].popup_left),i=d[e].popup_top,j=d[e].popup_width,k=d[e].popup_height,l=d[e].is_usable,m=d[e].period,n=d[e].nowtime;"y"==l.toLowerCase()&&m>n&&(b=jsux.rootPath+"popup-event?id="+c+"&winname="+g,openPopup(b,g,h,i,j,k)),e++,e==f&&a.stopTimer()},this.startTimer=function(){b.push(setInterval(a.open,c))},this.stopTimer=function(){for(var a=0;a<b.length;a++)clearInterval(b[a])},this.load=function(b){var c={id:b},d=!0,e="";d!==!1&&(d=!1,e=jsux.rootPath+"opener-json",jsux.getJSON(e,c,function(b){var c=$.trim(b.result.toLowerCase());"y"==c?(a.init(b.data),a.startTimer()):trace(b.msg,1),d=!0}))}};a.popup=new b,a.open=function(a){this.popup.load(a)},a.sux_path=function(a){this.popup.sux_path=a}}(popupManager),jsux.app=jsux.app||{},function(a,b){var c=jsux.Model.create();c.extend({windowListener:function(a,c){if(!jQuery)throw new Error("windowListener() : need jQuery plugin");b(window).on(a,function(a){c(a)})},isEqualItem:function(a,b){if(!(a.length<1)){for(var c=0;c<a.length;c++)if(a[c].id==b.id)return!0;return!1}},addClass:function(a,c){if(!jQuery)throw new Error("addClass() : need jQuery plugin");return!b(a).hasClass(c)&&(b(a).addClass(c),!0)},removeClass:function(a,c){if(!jQuery)throw new Error("removeClass() : need jQuery plugin");return!!b(a).hasClass(c)&&(b(a).removeClass(c),!0)},searchParentElement:function(a,c){if(!jQuery)throw new Error("searchParentElement() : need jQuery plugin");var d=b(a).parent(),e="";do{if(e+=d[0].className+"\n",d.hasClass(c))return d;d=d.parent()}while(null!==d);return null},hasParentClass:function(a,b){if(!jQuery)throw new Error("hasParentClass() : need jQuery plugin");return!!this.searchParentElement(a,b)}}),c.include({swiper:null,isLoading:!1,resource_url:"",params:null,id:"",tmpl:"",template:"",msg_tmpl:"",msg_template:"",model:[],msg:"데이터가 존재하지 않습니다.",setSwiper:function(a){this.swiper=a},lockSwipes:function(){var a=this;this.swiper&&a.swiper.lockSwipes()},unlockSwipes:function(){this.swiper&&this.swiper.unlockSwipes()},updateSwiper:function(){this.swiper&&this.swiper.update()},resizeSwiper:function(){this.swiper&&this.swiper.onResize()},slideTo:function(a){(isNaN(a)||a<0)&&(a=0),this.swiper&&this.swiper.slideTo(a)},hasItem:function(a){var b=!1,c=function(c){for(var d=0;d<c.length;d++){if(c[d].id==a){b=!0;break}c[d].sub&&c[d].sub.length>0&&arguments.callee(c[d].sub)}};return c(this.model),c=null,b},getItem:function(a){for(var b,c=0;c<this.model.length;c++)if(this.model[c].id==a){b=this.model[c];break}return b},addItem:function(a){for(var b=0;b<this.model.length;b++)if(this.model[b].id==a.id)return!1;this.model.push(a),this.setData(this.model),this.slideTo(1),this.dispatchEvent({type:"add",target:this,model:a})},cutItem:function(a){for(var b,c=0;c<this.model.length;c++)if(this.model[c].id==a){b=this.model.splice(c,1),b=b[0];break}return this.setData(this.model),this.resizeSwiper(),b},updateItem:function(a){for(var b=0;b<this.model.length;b++)this.model[b].id==a.id&&(this.model[b]=a);this.setData(this.model),this.dispatchEvent({type:"add",target:this,model:a})},setResource:function(a,b){this.resource_url=a,b&&(this.params=b)},setParams:function(a){this.params=a},initialize:function(a){for(var b in a)this[b]=a[b]},digit:function(a){return jsux.utils.digit(a)},reset:function(){b(this.id).empty()},remove:function(){b(this.id).empty()},reloadData:function(a,b){var c=this,d={passover:(a-1)*b,limit:b},e=this.resource_url;if(!e)return void trace("resource_url 주소를 확인해주세요.");if(this.params)for(var f in this.params)d[f]||(d[f]=this.params[f]);this.isLoading!==!0&&(this.isLoading=!0,jsux.getJSON(e,d,function(a){c.setData(a.data.list),c.dispatchEvent({type:"loaded",target:this,data:a.data}),c.isLoading=!1}))},setData:function(a){var c=null;return this.model=a,this.id?b(this.id).length<1?void jsux.logger.error("'"+this.id+"' 아이디 DOM 객체가 존재하지 않습니다.","jsux_list_manager.js"):(this.template=this.template||this.tmpl,this.template?(c=b(this.template),c.length<1?void jsux.logger.error("'"+this.id+"' 템플릿 DOM 객체가 존재하지 않습니다.","jsux_list_manager.js"):(this.reset(),void this.makeMenu(a,c))):void jsux.logger.error("'"+this.template+"' 템플릿 식별자를 입력하세요.","jsux_list_manager.js")):void jsux.logger.error("'"+this.id+"' 아이디 식별자를 입력하세요.","jsux_list_manager.js")},makeMenu:function(a,c){var d=this,e=null,f=null,g=null;e=function(a){var b=null;return a&&(b=new Date(a),b=isNaN(b.getFullYear())?"0000-00-00":b.getFullYear()+"-"+d.digit(b.getMonth()+1)+"-"+d.digit(b.getDate())),b},f=function(a,b){return 0===(a||b)?0:a/b*100},g=function(a){jsux.utils.addComma(a)},b(c).tmpl(a,{getRate:function(a,b){return f(a,b)},editDate:function(a){return e(a)},addComma:function(a){return g(a)}}).appendTo(this.id),0===a.length&&this.setMsg(this.msg),this.updateSwiper()},setMsg:function(a){var c="object"==typeof a?a:{msg:a},d="";return this.msg_template=this.msg_template||this.msg_tmpl,this.msg_template?(d=b(this.msg_template),d.length<1?void jsux.logger.error("'"+this.msg_template+"' 메세지 템플릿 DOM 객체가 존재하지 않습니다.","jsux_list_manager.js",167):void b(d).tmpl(c).appendTo(this.id)):void jsux.logger.error("'"+this.msg_template+"' 메세지 템플릿 식별자를 입력하세요.","jsux_list_manager.js")}}),a.ListManager=c,a.getListManager=function(){return new c}}(jsux.app,jQuery),jsux.app=jsux.app||{},function(a,b){var c=jsux.Model.create();c.extend({onResize:function(a){var c=this;b(window).on("resize",function(){c[a]()})}}),c.include({el:null,id:"",tmpl:null,template:null,control:null,total:0,limit:0,isActivated:!1,isMobile:!0,minWidth:768,currentPage:0,currentActivate:0,direction:"prev",pageGroupNum:1,pageTotalNum:0,originLimitGroup:1,limitGroup:1,activateId:1,oldActivate:-1,liLists:null,markup:null,name:null,getName:function(){return this.name},setName:function(a){this.name=a},reset:function(){b(this.id).empty()},initialize:function(a){for(var c in a)this[c]=a[c];if(this.el=b(this.el),this.tmpl=this.tmpl||this.template,this.markup=b(this.tmpl),!this.control){var d=this.el.find(".sx-pagination-control");this.control={prev:d[0],next:d[1]}}this.setEvent()},setData:function(a){for(var b in a)this[b]=a[b];this.originLimitGroup=this.limitGroup;var c=this.total%this.limit,d=this.total/this.limit;this.pageTotalNum=0!==c?Math.ceil(d):d;var e=this.getResizeWidth();e<this.minWidth?(this.isMobile=!1,this.changeToMobile()):(this.isMobile=!0,this.changeToPC()),this.remove(),this.defaultSetting(),this.setLayout(),this.activate(this.activateId)},defaultSetting:function(){if(!this.id)return void jsux.logger.error("'"+this.id+"' 아이디 식별자를 확인해주세요.","jsux_pagination.js",88);var a=b(this.id);return a.length<1?void jsux.logger.error("'"+this.id+"' 아이디 DOM 객체가 존재하지 않습니다.","jsux_pagination.js",94):this.tmpl?this.markup.length<1?void jsux.logger.error("'"+this.tmpl+"' 템플릿 DOM 객체가 존재하지 않습니다.","jsux_pagination.js",152):void 0:void jsux.logger.error("'"+this.tmpl+"' 템플릿 식별자를 입력하세요.","jsux_pagination.js",153)},setLayout:function(){var a=[],c=0,d=0,e=0,f=0;if(this.liLists=[],d=(this.pageGroupNum-1)*this.limitGroup+1,f=d+this.limitGroup-1,f<=this.pageTotalNum)e=this.limitGroup;else if(this.limitGroup<2)e=1;else{var g=this.pageTotalNum%this.limitGroup;e=0!==g?Math.ceil(g):0}c=d+e;for(var h=d;h<c;h++)a.push({no:h});b(this.markup).tmpl(a).appendTo(this.id),this.el.hasClass("sx-hide")&&this.el.removeClass("sx-hide"),this.el.hasClass("sx-show")||this.el.addClass("sx-show"),this.liLists=this.el.find("a"),this.currentPage={prev:d,next:c-1},this.currentActivate={prev:1,next:e}},setEvent:function(){var a=this;b(this.el).on("click",function(c){c.preventDefault();var d=c.target.className;"sx-pagination"===d&&a.callPage(b.trim(b(c.target).text()))}),c.onResize.apply(this,["resizeHandler"])},prev:function(){this.direction="prev",this.pageGroupNum--,this.pageGroupNum<=1&&(this.pageGroupNum=1,this.inactivePrev()),this.activeNext(),this.remove(),this.setLayout(),this.activate(this.currentActivate[this.direction]),this.dispatchEvent({type:"change",page:this.currentPage[this.direction]})},activePrev:function(){var a=this,c=b(this.control.prev);c.hasClass("unactive")&&(c.removeClass("unactive"),c.on("click",function(b){b.preventDefault(),a.prev()}))},inactivePrev:function(){var a=b(this.control.prev);a.hasClass("unactive")||(a.addClass("unactive"),a.off("click"))},next:function(){this.direction="next",this.pageGroupNum++,this.pageGroupNum*this.limitGroup>=this.pageTotalNum&&(this.pageGroupNum=Math.ceil(this.pageTotalNum/this.limitGroup),this.inactiveNext()),this.activePrev(),this.remove(),this.setLayout(),this.activate(this.currentActivate[this.direction]),this.dispatchEvent({type:"change",page:this.currentPage[this.direction]})},activeNext:function(){var a=this,c=b(this.control.next);c.hasClass("unactive")&&(c.removeClass("unactive"),c.on("click",function(b){b.preventDefault(),a.next()}))},inactiveNext:function(){var a=b(this.control.next);a.hasClass("unactive")||(a.addClass("unactive"),a.off("click"))},callPage:function(a){var b=parseInt(a);this.activate(b),this.dispatchEvent({type:"change",page:b})},remove:function(){b(this.id).empty()},activate:function(a){var c=0;if(this.activateId=parseInt(a),isNaN(this.activateId))throw new Error(typeof a+" '"+a+"' is not a Number");b(this.liLists[this.oldActivate]).hasClass("active")&&b(this.liLists[this.oldActivate]).removeClass("active"),this.currentNum=c=Math.ceil(this.activateId%this.limitGroup),0===this.currentNum&&(this.currentNum=c=this.limitGroup),b(this.liLists[c]).hasClass("active")||b(this.liLists[c]).addClass("active"),this.oldActivate=c},activateControl:function(){if(this.pageTotalNum<2)this.deactivateControl();else{this.isActivated=!0;var a=this.pageTotalNum;this.isMobile===!1&&(a=Math.ceil(this.pageGroupNum/this.originLimitGroup)),this.pageGroupNum<=1?(this.inactivePrev(),this.activeNext()):this.pageGroupNum>=a?(this.activePrev(),this.inactiveNext()):(this.activePrev(),this.activeNext())}},deactivateControl:function(){this.isActivated=!1,this.inactiveNext(),this.inactivePrev()},getResizeWidth:function(){return b(window).outerWidth()},resizeHandler:function(){this.isActivated!==!1&&(this.changeToMobile(),this.changeToPC(),this.remove(),this.setLayout(),this.activate(this.activateId),this.activateControl())},changeToMobile:function(){var a=this.getResizeWidth();a<this.minWidth&&this.isMobile===!1&&(this.isMobile=!0,this.limitGroup=1,this.pageGroupNum=(this.pageGroupNum-1)*this.originLimitGroup+this.activateId,this.activateId=this.pageGroupNum)},changeToPC:function(){var a=this.getResizeWidth();a>=this.minWidth&&this.isMobile===!0&&(this.activateId=this.pageGroupNum%this.originLimitGroup,this.isMobile=!1,this.limitGroup=this.originLimitGroup,this.pageGroupNum=Math.ceil(this.pageGroupNum/this.originLimitGroup))}}),a.getPagination=function(){return new c}}(jsux.app,jQuery);