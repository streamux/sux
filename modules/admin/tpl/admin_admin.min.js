/*! Copyright (C) StreamUX <http://www.streamux.com> */
/**!
 * @concat js in modules 
 * project sux
 * date 06-01-2019
 * @brief jsux Modules Javascript
 **/
jsux.fn=jsux.fn||{},jsux.fn.main={convertJsonToObj:function(a,b,c,d){var e=b,f={label:c};d||(d=function(){}),$("#"+e).empty(),$(a).tmpl(f,d).appendTo("#"+e)},setServiceConfig:function(a){var b=this,c=$("#textfield_tmpl"),d=$(".sx-content .sx-service-config .view-type-textfield");$(d).each(function(d){b.convertJsonToObj(c,this.id,a[this.id],{getUnit:function(a){return a}})}),d=$(".sx-content .sx-service-config .view-type-icon"),$(d).each(function(b){var c=$(this).parent().find(".service_label > .view-type-textfield").attr("id"),d=parseInt(a[c]);if(d>0){var e=$(this);e.hasClass("sx-label-default")&&e.removeClass("sx-label-default"),e.hasClass("sx-label-primary")||(e.addClass("sx-label-info"),e.text("on"))}})},setEventNews:function(a){var b="http://streamux.com/notice/list-json",c={id:"#eventNewsList",template:"#eventNewsList_tmpl",msg_tmpl:"#ulWarnMsg_tmpl"},d=null;this.displayList(a,b,c,d)},setLatestComment:function(a){var b="admin-admin/latestcomment-json",c={id:"#latestCommentList",template:"#latestCommentList_tmpl",msg_tmpl:"#tableWarnMsg_tmpl"},d={el:".pagin_comment",id:"#latestCommentPaginList",tmpl:"#pagination_tmpl",control:{prev:".pagin_comment .sx-nav-prev",next:".pagin_comment .sx-nav-next"}};this.displayList(a,b,c,d)},setNewMember:function(a){var b="admin-admin/newmember-json",c={id:"#newMemberList",template:"#newMemberList_tmpl",msg_tmpl:"#tableWarnMsg_tmpl"},d={el:".pagin_member",id:"#memberPaginList",tmpl:"#pagination_tmpl",control:{prev:".pagin_member .sx-nav-prev",next:".pagin_member .sx-nav-next"}};this.displayList(a,b,c,d)},setConnectCount:function(a){var b=function(a){return jsux.utils.addComma(a)},c=this,d=$("#textfield_tmpl"),e=$(".sx-content .connecter .view-type-textfield");$(e).each(function(e){c.convertJsonToObj(d,this.id,a[this.id],{getUnit:function(a){return b(a)}})})},displayList:function(a,b,c,d,e){var f=5,g=5,h=5,i=jsux.app.getPagination(),j=jsux.app.getListManager(),k=null,l=null,b=jsux.rootPath+b;e&&j.setParams(e),j.setResource(b),j.initialize(c),null!==d&&i.initialize(d),k=function(a){j.reloadData(a.page,f)},l=function(a){var b=a.data;b&&b.list&&b.list.length>0?j.setData(b.list):(j.reset(),j.setMsg(b.msg))},j.addEventListener("loaded",l),null!==d&&i.addEventListener("change",k),a&&a.list&&a.list.length>0?null!==d&&(i.setData({total:a.total_num,limit:f,limitGroup:g,originLimitGroup:h}),i.activateControl()):null!==d&&i.deactivateControl(),l({data:a})},setEvent:function(){},setLayout:function(){var a=this,b={passover:0,limit:5};jsux.getJSON(jsux.rootPath+"admin-admin/main-json",b,function(b){a.setConnectCount(b.data.connecter),a.setNewMember(b.data.newmember),a.setLatestComment(b.data.latestcomment),a.setServiceConfig(b.data.serviceConfig)});try{var c=document.getElementById("#imgCountUpdater");null===c&&(c=document.createElement("img")),c.src=jsux.copyright+"/analytics/install-user?shot="+window.location.href,c.style.position="absolute",c.style.top="-1000px",c.id="imgCountUpdater",document.getElementById("sxGnbLoginWrap").appendChild(c)}catch(a){}try{jsux.getJSON(jsux.copyright+"/board-admin/news-list-json",{},function(b){"Y"===b.result.toUpperCase()?a.setEventNews(b.data):console.log(b.msg)})}catch(a){}},init:function(){this.setLayout(),this.setEvent()}},jsux.fn.login={checkForm:function(a){var b=a.user_id.value.length,c=a.user_pass.value.length;return b<1?(trace("관리자 아이디를 입력하세요."),a.user_id.focus(),!1):!(c<1)||(trace("관리자 비밀번호를 입력하세요."),a.user_pass.focus(),!1)},init:function(){$("input[name=user_id]").focus()}},jsux.fn.member={setLayout:function(){jsux.getJSON("member.list.json.php",function(a){var b="";$("#memberList").empty(),"Y"==a.result?(a.data.list.length>0?(b=$("#memberList_tmpl"),$(b).tmpl(a.data.list).appendTo("#memberList")):(b=$("#membertableWarnMsg_tmpl"),$(b).tmpl(a).appendTo("#memberList")),$("#articleMemberDelTitle").empty(),b=$("#articleMemberDelTitle_tmpl"),$(b).tmpl(a.data).appendTo("#articleMemberDelTitle")):(b=$("#membertableWarnMsg_tmpl"),$(b).tmpl(a).appendTo("#memberList"))})},init:function(){this.setLayout()}};