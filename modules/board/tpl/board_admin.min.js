/*! Copyright (C) StreamUX <http://www.streamux.com> */
/**!
 * @concat js in modules 
 * project sux
 * date 05-04-2018
 * @brief jsux Modules Javascript
 **/
jsux.fn=jsux.fn||{},jsux.fn.ckeditor={updateElement:function(a){CKEDITOR.instances[a].updateElement()},replace:function(a){var b={height:"350px",toolbar:[{name:"clipboard",items:["Undo","Redo"]},{name:"basicstyles",items:["Bold","Italic","Underline","Superscript","Subscript","Strike","RemoveFormat","CopyFormatting"]},{name:"colors",items:["TextColor","BGColor"]},{name:"align",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"insert",items:["Image","-","Youtube","-","Table","-","HorizontalRule"]},{name:"document",items:["Print"]},"/",{name:"styles",items:["Format","Font","FontSize"]},{name:"links",items:["Link","Unlink"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote"]},{name:"editing",items:["Scayt","-","Source"]},{name:"tools",items:["Maximize"]}]};CKEDITOR.replace(a,b)}},jsux.fn.list={limit:10,limitGroup:5,pagination:jsux.app.getPagination(),listManager:jsux.app.getListManager(),listMobileManager:jsux.app.getListManager(),setLayout:function(){var a=this,b=$("input[name=list_json_path]").val(),c={passover:0,limit:this.limit},d=null,e=null;return b?(a.listManager.setResource(b),a.listMobileManager.setResource(b),this.listManager.initialize({id:"#dataList",tmpl:"#dataListTmpl",msg_tmpl:"#warnMsgTmpl"}),this.listMobileManager.initialize({id:"#dataMobileList",tmpl:"#dataListMobileTmpl",msg_tmpl:"#warnMsgMobileTmpl"}),d=function(b){a.listManager.reloadData(b.page,this.limit),a.listMobileManager.reloadData(b.page,this.limit)},e=function(b){var c=b.data;c&&c.list&&c.list.length>0?(a.listManager.setData(c.list),a.listMobileManager.setData(c.list)):(a.listManager.reset(),a.listManager.setMsg(b.msg),a.listMobileManager.reset(),a.listMobileManager.setMsg(b.msg))},this.listManager.addEventListener("loaded",e),this.pagination.addEventListener("change",d),this.pagination.initialize({el:".sx-pagination-group",id:"#paginList",tmpl:"#paginationTmpl",control:{prev:".sx-pagination-group .sx-nav-prev",next:".sx-pagination-group .sx-nav-next"}}),void jsux.getJSON(b,c,function(b){var c=b.data;if(c&&c.list&&c.list.length>0){a.pagination.setData({total:c.total_num,limit:a.limit,limitGroup:a.limitGroup}),a.pagination.activateControl();var d=$(".sx-board-panel .header .total_num");d.empty(),d.text(c.total_num)}else a.pagination.deactivateControl();e(b)})):void trace("input[name=list_json_path] 경로값을 입력하세요")},init:function(){this.setLayout()}},jsux.fn.add={checkDocumentForm:function(a){jsux.fn.ckeditor.updateElement("content");var b=["이름을","비밀번호를","제목을","내용을","등록키를"],c=["user_name","password","title","content","wallname"],d=a.email_address,e=!0;if($.each(c,function(c,d){var f=a[d];if(f.value.length<1)return trace(b[c]+" 입력 하세요."),f.focus(),e=!1,!1}),d&&d.value&&d.value.length>0){var f=jsux.utils.validateEmail(d.value);f||(trace("이메일 주소가 잘못되었습니다."),d.focus(),e=!1)}return e},setEvent:function(){var a=this;$("form[name=f_board_write]").on("submit",function(b){a.checkDocumentForm(b.target)||b.preventDefault()})},setLayout:function(){jsux.fn.ckeditor.replace("content")},init:function(){this.setLayout(),this.setEvent(),jsux.setAutoFocus()}},jsux.fn.modify={checkDocumentForm:function(a){jsux.fn.ckeditor.updateElement("content");var b=["제목을","내용을","등록키를"],c=["title","content","wallname"],d=a.email_address,e=!0;if($.each(c,function(c,d){var f=a[d];if(f.value.length<1)return trace(b[c]+" 입력 하세요."),f.focus(),e=!1,!1}),d&&d.value&&d.value.length>0){var f=jsux.utils.validateEmail(d.value);f||(trace("이메일 주소가 잘못되었습니다."),d.focus(),e=!1)}return e},setEvent:function(){var a=this;$("form[name=f_board_modify]").on("submit",function(b){a.checkDocumentForm(b.target)||b.preventDefault()})},setLayout:function(){jsux.fn.ckeditor.replace("content")},init:function(){this.setLayout(),this.setEvent()}},jsux.fn.delete={returnUrl:function(){var a=$("input[name=location_back]").val();return a?a:(trace("input[name=location_back] 경로값을 확인해주세요."),"")},sendJson:function(){var a=this,b={_method:$("input[name=_method]").val(),category:$("input[name=category]").val(),id:$("input[name=id]").val()},c=$("form"),d=c[0].action;d||trace("Form action 호출 경로가 존재하지 않습니다."),jsux.getJSON(d,b,function(b){"Y"==b.result?jsux.goURL(a.returnUrl()):trace(b.msg)})},setEvent:function(){var a=this;$("form[name=f_admin_board_delete]").on("submit",function(b){b.preventDefault(),a.sendJson()}),$("#btnCancel").on("click",function(b){b.preventDefault(),jsux.goURL(a.returnUrl())})},init:function(){this.setEvent()}},jsux.fn.groupAdd={returnUrl:function(){var a=$("input[name=location_back]").val();return a?a:(trace("input[name=location_back] 경로값을 확인해주세요."),"")},getSelectVal:function(a){return $.trim($("select[name="+a+"]").val())},setSelectVal:function(a,b){$("select[name="+a+"]").val(b)},getRadioVal:function(a){return $("input:radio[name="+a+"]:checked").val()},setRadioVal:function(a,b){return $("input:radio[name="+a+"]:input[value="+b+"]").prop("checked",!0)},getCheckboxVal:function(a){var b="",c=$("input:checkbox[name="+a+"]:checked"),d=c.length;return $(c).each(function(a){b+=c[a].value,a<d-1&&(b+=",")}),b},checkLangKor:function(a){var b=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/;return b.test(a)},checkFormVal:function(a){var b=a.category.value.length,c=a.board_name.value.length;return b<1?(trace("게시글 그룹 테이블 이름을 입력하세요."),a.category.focus(),!1):this.checkLangKor(a.category.value)?(trace("테이블 이름에 한글이 포함되어 있습니다."),a.category.focus(),!1):!(c<1)||(trace("게시글 그룹 이름을 입력하세요."),a.board_name.focus(),!1)},checkCategory:function(){var a={category:$("input[name=category]").val()};return""===a.category?(trace("카테고리명을 입력해 주세요."),void $("input[name=category]").focus()):void jsux.getJSON(jsux.rootPath+"board-admin/check-board",a,function(a){a.msg&&trace(a.msg)})},sendJson:function(a){var b=this,c={_method:$("input[name=_method]").val()};$.each(a,function(a,d){var e="checkbox|button|submit",f=$(d).attr("type")?$(d).attr("type"):d.nodeName.toLowerCase();"select"===d.nodeName.toLowerCase()?(d.value=b.getSelectVal(d.name),c[d.name]=d.value):"radio"===f&&d.checked?c[d.name]=d.value:"text"!==f&&"textarea"!==f||f.match(e)||(c[d.name]=d.value)});var d=a.action;return d?void jsux.getJSON(d,c,function(a){trace(a.msg),a.result&&"Y"===a.result.toUpperCase()&&jsux.goURL(b.returnUrl())}):(trace("Action URL Not Exists"),!1)},setEvent:function(){var a=this;$("form").on("submit",function(b){b.preventDefault(),a.checkFormVal(b.target)===!0&&a.sendJson(b.target)}),$("#btnCancel").on("click",function(b){b.preventDefault(),jsux.goURL(a.returnUrl())}),$("#checkCategory").on("click",function(b){a.checkCategory()})},init:function(){this.setEvent(),jsux.setAutoFocus()}},jsux.fn.groupModify={returnUrl:function(){var a=$("input[name=location_back]").val();return a?a:(trace("input[name=location_back] 경로값을 확인해주세요."),"")},getSelectVal:function(a){var b=$.trim($("select[name="+a+"]").val());return b},setSelectVal:function(a,b){$("select[name="+a+"]").val(b)},getRadioVal:function(a){var b=$("input:radio[name="+a+"]:checked").val();return b},setRadioVal:function(a,b){var c=$("input:radio[name="+a+"][value="+b+"]").attr("checked",!0);return c},getCheckboxVal:function(a){var b="",c=$("input:checkbox[name="+a+"]:checked"),d=c.length;return $(c).each(function(a){b+=c[a].value,a<d-1&&(b+=",")}),b},getTextAreaVal:function(a){var b=$("textarea[name="+a+"]").val();return b},setTextAreaVal:function(a,b){$("textarea[name="+a+"]").val(b)},checkLangKor:function(a){var b=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/;return b.test(a)},checkFormVal:function(a){var b=a.board_name.value.length;return!(b<1)||(trace("게시글 그룹 이름을 입력하세요."),a.board_name.focus(),!1)},sendJson:function(a){var b=this,c={_method:$("input[name=_method]").val()};$.each(a,function(a,d){var e="checkbox|button|submit",f=$(d).attr("type")?$(d).attr("type"):d.nodeName.toLowerCase();"select"===d.nodeName.toLowerCase()?(d.value=b.getSelectVal(d.name),c[d.name]=d.value):"radio"===f&&d.checked?c[d.name]=d.value:"text"!==f&&"textarea"!==f&&"hidden"!==f||f.match(e)||(c[d.name]=d.value)});var d=a.action;return d?void jsux.getJSON(d,c,function(a){a.result&&"Y"===a.result.toUpperCase()?jsux.goURL(b.returnUrl()):trace(a.msg)}):(trace("Action URL Not Exists"),!1)},setEvent:function(){var a=this;$("form").on("submit",function(b){b.preventDefault(),a.checkFormVal(b.target)===!0&&a.sendJson(b.target)}),$("#btnCancel").on("click",function(b){b.preventDefault(),jsux.goURL(a.returnUrl())})},setLayout:function(){var a=this,b={id:$("input[name=id]").val()},c=$("input[name=modify_info_path]").val();return c?void jsux.getJSON(c,b,function(b){var c=null;b.result&&"Y"===b.result.toUpperCase()?(c=$("input[type=text]"),$(c).each(function(a){b.data[this.name]&&(this.value=b.data[this.name])}),c=$("select"),$(c).each(function(a){b.data[this.name]&&(this.value=b.data[this.name])}),c=$("input[type=radio]"),$(c).each(function(c){var d=b.data[this.name]?b.data[this.name]:this.value;a.setRadioVal(this.name,d)}),a.setTextAreaVal("limit_word",b.data.limit_word)):trace(b.msg),jsux.setAutoFocus()}):void trace("input[name=modify_info_path] 경로값을 입력하세요.")},init:function(){this.setLayout(),this.setEvent()}},jsux.fn.groupDelete={returnUrl:function(){var a=$("input[name=location_back]").val();return a?a:(trace("input[name=location_back] 경로값을 확인해주세요."),"")},sendJson:function(){var a=this,b={_method:$("input[name=_method]").val(),category:$("input[name=category]").val(),id:$("input[name=id]").val()},c=$("form"),d=c[0].action;d||trace("Form action 호출 경로가 존재하지 않습니다."),jsux.getJSON(d,b,function(b){"Y"==b.result?jsux.goURL(a.returnUrl()):trace(b.msg)})},setEvent:function(){var a=this;$("#btnConfirm").on("click",function(b){b.preventDefault(),a.sendJson()}),$("#btnCancel").on("click",function(b){b.preventDefault(),jsux.goURL(a.returnUrl())})},init:function(){this.setEvent()}};