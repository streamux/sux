/*! Copyright (C) StreamUX <http://www.streamux.com> */
/**!
 * @concat js in modules 
 * project sux
 * date 05-04-2018
 * @brief jsux Modules Javascript
 **/
jsux.fn=jsux.fn||{},jsux.fn.setupDb={checkForm:function(a){for(var b=jsux.forms.getFormElements(a.elements,"type","hidden|text|password"),c=0;c<b.length;c++)if(b[c]&&""===b[c].value)return trace('<input name="'+b[c].name+'"> 값이 필요합니다."'),b[c].focus(),!1;return!0},sendAndLoad:function(a){for(var b=!1,c={},d="",e=jsux.forms.getFormElements(a.elements,"type","hidden|text|password"),f=0;f<e.length;f++)c[e[f].name]=e[f].value;d=a.action,d||alert("Not Exist URL"),b===!0&&trace("데이터 생성 중 입니다. 잠시만 기다려주세요."),b=!0,jsux.getJSON(d,c,function(a){b=!1,alert(a.msg),"Y"==a.result&&jsux.goURL(jsux.rootPath+"setup-admin")})},setEvent:function(){var a=this;$("form[name=f_setup_db]").on("submit",function(b){b.preventDefault(),a.checkForm(b.target)===!0&&a.sendAndLoad(b.target)})},init:function(){this.setEvent(),jsux.setAutoFocus()}},jsux.fn=jsux.fn||{},jsux.fn.setupAdmin={checkForm:function(a){for(var b=["admin_id","admin_pwd","admin_name","admin_nickname","admin_email","yourhome"],c=["아이디를","비밀번호를","이름을","닉네임을","이메일을","사이트 주소를"],d=0;d<b.length;d++){var e=a[b[d]];if(!e.value)return trace(c[d]+" 입력하세요."),e.focus(),!1}return!0},createTable:function(){var a=!1,b={_method:"insert"};a===!0&&trace("데이터 생성 중 입니다. 잠시만 기다려주세요."),a=!0,jsux.getJSON(jsux.rootPath+"create-table",b,function(b){a=!1,trace(b.msg),jsux.goURL(jsux.rootPath)})},sendAndLoad:function(a){var b=this,c=!1,d={_method:a._method.value,admin_id:a.admin_id.value,admin_pwd:a.admin_pwd.value,admin_name:a.admin_name.value,admin_nickname:a.admin_nickname.value,admin_email:a.admin_email.value,yourhome:a.yourhome.value},e="";e=a.action,e||alert("Not Exist URL"),c===!0&&trace("데이터 생성 중 입니다. 잠시만 기다려주세요."),c=!0,jsux.getJSON(e,d,function(a){c=!1,trace(a.msg),"Y"==a.result&&b.createTable()})},setEvent:function(){var a=this;$("form[name=f_setup_admin]").on("submit",function(b){b.preventDefault(),a.checkForm(b.target)&&a.sendAndLoad(b.target)})},init:function(){this.setEvent(),jsux.setAutoFocus()}},jsux.fn=jsux.fn||{},jsux.fn.uninstall={init:function(){}};