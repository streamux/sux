/*! Copyright (C) StreamUX <http://www.streamux.com> */
/**!
 * @concat js in modules 
 * project sux
 * date 06-01-2019
 * @brief jsux Modules Javascript
 **/
jsux.fn=jsux.fn||{},jsux.fn.list={limit:10,limitGroup:5,pagination:jsux.app.getPagination(),listManager:jsux.app.getListManager(),listMobileManager:jsux.app.getListManager(),setEvent:function(){$(".popup > a").bind("click",function(a){var b=$(this).data("key");popupManager.open(b)})},setLayout:function(){var a=this,b=$("input[name=list_json_path").val(),c=null,d=null;this.listManager.initialize({id:"#dataList",tmpl:"#dataListTmpl",msg_tmpl:"#warnMsgTmpl"}),this.listMobileManager.initialize({id:"#dataMobileList",tmpl:"#dataListMobileTmpl",msg_tmpl:"#warnMsgMobileTmpl"}),c=function(b){a.listManager.reloadData(b.page,a.limit),a.listMobileManager.reloadData(b.page,a.limit)},d=function(b){var c=b.data;c&&c.list&&c.list.length>0?(a.listManager.setData(c.list),a.listMobileManager.setData(c.list)):(a.listManager.reset(),a.listManager.setMsg(b.msg),a.listMobileManager.reset(),a.listMobileManager.setMsg(b.msg))},this.listManager.addEventListener("loaded",d),this.pagination.addEventListener("change",c),this.pagination.initialize({el:".sx-pagination-group",id:"#paginList",tmpl:"#paginationTmpl",control:{prev:".sx-pagination-group .sx-nav-prev",next:".sx-pagination-group .sx-nav-next"}}),jsux.getJSON(b,function(b){var c=b.data;c&&c.list&&c.list.length>0?(a.pagination.setData({total:c.total_num,limit:a.limit,limitGroup:a.limitGroup}),a.pagination.activateControl()):a.pagination.deactivateControl(),d(b),a.setEvent()})},init:function(){this.setLayout()}},jsux.fn.add={returnUrl:function(){var a=$("input[name=location_back]").val();return a?a:(trace("input[name=location_back] 경로값을 확인해주세요."),"")},getSelectVal:function(a){var b=$.trim($("select[name="+a+"]").val());return b},setSelectVal:function(a,b){$("select[name="+a+"]").val(b)},getTextAreaVal:function(a){var b=$("textarea[name="+a+"]").val();return b},setTextAreaVal:function(a,b){$("textarea[name="+a+"]").val(b)},checkLangKor:function(a){var b=/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/;return b.test(a)},chechFormVal:function(a){var b=a.popup_name.value.length;return!(b<1)||(trace("팝업이름을 입력하세요."),a.popup_name.focus(),!1)},sendJson:function(a){var b=this,c={};$.each(a,function(a,d){var e="checkbox|button|submit",f=$(d).attr("type")?$(d).attr("type"):d.nodeName.toLowerCase();"select"===d.nodeName.toLowerCase()?(d.value=b.getSelectVal(d.name),c[d.name]=d.value):"radio"===f&&d.checked?c[d.name]=d.value:f.match(e)||(c[d.name]=d.value)});var d=a.action;return d?void jsux.getJSON(d,c,function(a){"Y"==a.result?jsux.goURL(b.returnUrl()):trace(a.msg)}):(trace("Action URL Not Exists"),!1)},setEvent:function(){var a=this;$("form").on("submit",function(b){b.preventDefault(),a.chechFormVal(b.target)===!0&&a.sendJson(b.target)}),$("#btnCancel").on("click",function(){jsux.goURL(a.returnUrl())})},init:function(){this.setEvent(),jsux.setAutoFocus()}},jsux.fn.modify={returnUrl:function(){var a=$("input[name=location_back]").val();return a?a:(trace("input[name=location_back] 경로값을 확인해주세요."),"")},getSelectVal:function(a){var b=$.trim($("select[name="+a+"]").val());return b},setSelectVal:function(a,b){$("select[name="+a+"]").val(b)},getTextAreaVal:function(a){var b=$("textarea[name="+a+"]").val();return b},setTextAreaVal:function(a,b){$("textarea[name="+a+"]").val(b)},chechFormVal:function(a){var b=a.popup_name;return!!b.value||(trace("팝업 이름을 입력하세요."),b.focus(),!1)},sendJson:function(a){var b=this,c={};$.each(a,function(a,d){var e="checkbox|button|submit",f=$(d).attr("type")?$(d).attr("type"):d.nodeName.toLowerCase();"select"===d.nodeName.toLowerCase()?(d.value=b.getSelectVal(d.name),c[d.name]=d.value):"radio"===f&&d.checked?c[d.name]=d.value:f.match(e)||(c[d.name]=d.value)});var d=a.action;return d?void jsux.getJSON(d,c,function(a){a.result&&"Y"===a.result.toUpperCase()?jsux.goURL(b.returnUrl()):trace(a.msg)}):(trace("Action URL Not Exists"),!1)},setEvent:function(){var a=this;$("form").on("submit",function(b){b.preventDefault(),a.chechFormVal(b.target)&&a.sendJson(b.target)}),$("#btnCancel").on("click",function(){jsux.goURL(a.returnUrl())})},setLayout:function(){var a=this,b={id:$("input[name=id]").val()},c=$("input[name=modify_info_path").val();return c?void jsux.getJSON(c,b,function(b){var c=null,d=null,e=null,f=null;"Y"==b.result?(f=b.data.list[0],c=$("input[type=text]"),$(c).each(function(a){f[this.name]&&(this.value=f[this.name])}),c=$("select"),$(c).each(function(a){f[this.name]&&(this.value=f[this.name])}),d=$("#popupLabel_tmpl"),e=$("table tr").find(".view-type-textfield"),$(e).each(function(a){var b=$(e[a]).attr("id"),c={label:f[b]};$("#"+b).empty(),$(d).tmpl(c).appendTo("#"+b)}),a.setTextAreaVal("content",f.contents)):trace(b.msg),jsux.setAutoFocus()}):(trace("input[name=modify_info_path 경로값을 입력하세요."),!1)},init:function(){this.setLayout(),this.setEvent()}},jsux.fn.delete={returnUrl:function(){var a=$("input[name=location_back]").val();return a?a:(trace("input[name=location_back] 경로값을 확인해주세요."),"")},sendJson:function(){var a=this,b={_method:"delete",id:$("input[name=id]").val(),popup_name:$("input[name=popup_name]").val()},c=$("form"),d=c[0].action;jsux.getJSON(d,b,function(b){b.result&&"Y"===b.result.toUpperCase()?jsux.goURL(a.returnUrl()):trace(b.msg)})},setEvent:function(){var a=this;$("#btnConfirm").on("click",function(b){b.preventDefault(),a.sendJson()}),$("#cancelBtn").on("click",function(b){b.preventDefault(),jsux.goURL(a.returnUrl())})},init:function(){this.setEvent()}};